# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å API –¥–æ—Å—Ç–∞–≤–∫–∏

## –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Base URL
```
https://your-api-domain.com/api/v1
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã (–∫—Ä–æ–º–µ –ø—É–±–ª–∏—á–Ω—ã—Ö) —Ç—Ä–µ–±—É—é—Ç Bearer —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <access_token>
```

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
- Content-Type: `application/json`
- –í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: `latitude` (-90 –¥–æ 90), `longitude` (-180 –¥–æ 180)
- –í—Å–µ —Å—É–º–º—ã –≤ —Å—É–º–∞—Ö (UZS)

---

## üì± –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

### 1. –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

**POST** `/delivery/calculate-price`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "pickup": {
    "latitude": 41.3111,
    "longitude": 69.2797,
    "address": "–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ù–∞–≤–æ–∏ 1"
  },
  "dropoff": {
    "latitude": 41.3150,
    "longitude": 69.2800,
    "address": "–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ê–º–∏—Ä–∞ –¢–µ–º—É—Ä–∞ 15"
  }
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "distance_km": 2.5,
  "delivery_cost": 4500.0,
  "min_total": 5000.0,
  "cost_per_km": 1000.0,
  "base_fixed": 2000.0
}
```

**–û—à–∏–±–∫–∏:**
- `503 Service Unavailable` - –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞
- `400 Bad Request` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- `500 Internal Server Error` - –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –í—ã–∑—ã–≤–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–æ—á–µ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 5-10 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö

---

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**POST** `/delivery/orders`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–∫–∏. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å –±–∞–ª–∞–Ω—Å–∞ –∏ –∏—â–µ—Ç –≤–æ–¥–∏—Ç–µ–ª—è.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "pickup": {
    "latitude": 41.3111,
    "longitude": 69.2797,
    "address": "–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ù–∞–≤–æ–∏ 1"
  },
  "dropoff": {
    "latitude": 41.3150,
    "longitude": 69.2800,
    "address": "–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ê–º–∏—Ä–∞ –¢–µ–º—É—Ä–∞ 15"
  },
  "parcel_description": "–î–æ–∫—É–º–µ–Ω—Ç—ã",
  "parcel_estimated_value": 100000
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "id": 123,
  "user_id": 45,
  "driver_id": null,
  "pickup_latitude": 41.3111,
  "pickup_longitude": 69.2797,
  "pickup_address": "–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ù–∞–≤–æ–∏ 1",
  "dropoff_latitude": 41.3150,
  "dropoff_longitude": 69.2800,
  "dropoff_address": "–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ê–º–∏—Ä–∞ –¢–µ–º—É—Ä–∞ 15",
  "parcel_description": "–î–æ–∫—É–º–µ–Ω—Ç—ã",
  "parcel_estimated_value": 100000,
  "delivery_cost": 4500.0,
  "status": "created",
  "canceled_at": null,
  "cancel_reason": null,
  "created_at": "2026-02-02T12:00:00Z",
  "updated_at": null,
  "driver_name": null,
  "driver_phone": null
}
```

**–û—à–∏–±–∫–∏:**
- `400 Bad Request` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ / –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `401 Unauthorized` - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `503 Service Unavailable` - –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å –±–∞–ª–∞–Ω—Å
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞

---

### 3. –°–ø–∏—Å–æ–∫ –º–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤

**GET** `/delivery/orders?skip=0&limit=50&status=created`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `skip` (int, default=0) - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∑–∞–ø–∏—Å–µ–π
- `limit` (int, default=50, max=100) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
- `status` (string, optional) - –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "items": [
    {
      "id": 123,
      "user_id": 45,
      "driver_id": 12,
      "pickup_address": "–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ù–∞–≤–æ–∏ 1",
      "dropoff_address": "–¢–∞—à–∫–µ–Ω—Ç, —É–ª. –ê–º–∏—Ä–∞ –¢–µ–º—É—Ä–∞ 15",
      "delivery_cost": 4500.0,
      "status": "driver_assigned",
      "created_at": "2026-02-02T12:00:00Z",
      "driver_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "driver_phone": "+998901234567"
    }
  ],
  "total": 1,
  "skip": 0,
  "limit": 50
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é (–ø–æ–¥–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (–∞–∫—Ç–∏–≤–Ω—ã–µ / –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã –ø–µ—Ä–≤—ã–º–∏

---

### 4. –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑ –ø–æ ID

**GET** `/delivery/orders/{order_id}`

**–û—Ç–≤–µ—Ç (200 OK):** –ê–Ω–∞–ª–æ–≥–∏—á–µ–Ω –æ—Ç–≤–µ—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞

**–û—à–∏–±–∫–∏:**
- `404 Not Found` - –ó–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

### 5. –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞

**POST** `/delivery/orders/{order_id}/cancel`

**–ó–∞–ø—Ä–æ—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```json
{
  "reason": "–ü–µ—Ä–µ–¥—É–º–∞–ª"
}
```

**–û—Ç–≤–µ—Ç (200 OK):** –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –∑–∞–∫–∞–∑–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `canceled`

**–û—à–∏–±–∫–∏:**
- `400 Bad Request` - –ù–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å (–ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å—ã–ª–∫–∏ –≤–æ–¥–∏—Ç–µ–ª–µ–º)
- `404 Not Found` - –ó–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω

**–í–∞–∂–Ω–æ:** –û—Ç–º–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–æ —Å—Ç–∞—Ç—É—Å–∞ `picked_up`. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞–∫–∞–∑ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.

---

### 6. –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**GET** `/delivery/balance`

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "balance": 50000.0
}
```

**–í–∞–∂–Ω–æ:** –≠—Ç–æ –µ–¥–∏–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ (–¥–æ—Å—Ç–∞–≤–∫–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ —Ç.–¥.). –ë–∞–ª–∞–Ω—Å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `users_extended.balance`.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å –≤ —à–∞–ø–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª—è—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –±–∞–ª–∞–Ω—Å–µ (< 10000 —Å—É–º)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –±–∞–ª–∞–Ω—Å, —á—Ç–æ –∏ –≤ –¥—Ä—É–≥–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

### 7. –ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏–π –ø–æ –±–∞–ª–∞–Ω—Å—É

**GET** `/delivery/balance/log?skip=0&limit=50`

**–û—Ç–≤–µ—Ç (200 OK):**
```json
[
  {
    "id": 1,
    "order_id": 123,
    "amount": -4500.0,
    "type": "order_payment",
    "description": "–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ #123",
    "created_at": "2026-02-02T12:00:00Z"
  },
  {
    "id": 2,
    "order_id": 123,
    "amount": 4500.0,
    "type": "refund",
    "description": "–í–æ–∑–≤—Ä–∞—Ç –∑–∞ –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã–π –∑–∞–∫–∞–∑ #123",
    "created_at": "2026-02-02T12:05:00Z"
  }
]
```

**–¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π:**
- `order_payment` - –°–ø–∏—Å–∞–Ω–∏–µ –∑–∞ –∑–∞–∫–∞–∑ (amount < 0)
- `refund` - –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ (amount > 0)
- `admin_adjustment` - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

---

## üöó –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è

### 1. –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –≤–æ–¥–∏—Ç–µ–ª—è

**GET** `/delivery/driver/orders?skip=0&limit=50&status=driver_assigned`

**–û—Ç–≤–µ—Ç:** –ê–Ω–∞–ª–æ–≥–∏—á–µ–Ω —Å–ø–∏—Å–∫—É –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞

**–°—Ç–∞—Ç—É—Å—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
- `driver_assigned` - –ù–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –≤–æ–¥–∏—Ç–µ–ª—è
- `driver_on_way` - –í–æ–¥–∏—Ç–µ–ª—å –µ–¥–µ—Ç –∫ —Ç–æ—á–∫–µ –∑–∞–±–æ—Ä–∞
- `picked_up` - –ü–æ—Å—ã–ª–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞
- `in_delivery` - –í –¥–æ—Å—Ç–∞–≤–∫–µ
- `delivered` - –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ

---

### 2. –ü—Ä–∏–Ω—è—Ç—å –∑–∞–∫–∞–∑

**POST** `/delivery/driver/orders/{order_id}/accept`

**–û—Ç–≤–µ—Ç (200 OK):** –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∑–∞–∫–∞–∑ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `driver_assigned`

**–û—à–∏–±–∫–∏:**
- `400 Bad Request` - –ó–∞–∫–∞–∑ —É–∂–µ –ø—Ä–∏–Ω—è—Ç –¥—Ä—É–≥–∏–º –≤–æ–¥–∏—Ç–µ–ª–µ–º
- `404 Not Found` - –ó–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω

---

### 3. –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞–∫–∞–∑

**POST** `/delivery/driver/orders/{order_id}/reject`

**–û—Ç–≤–µ—Ç (200 OK):** –ó–∞–∫–∞–∑ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `searching_driver`, —Å–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç –¥—Ä—É–≥–æ–≥–æ –≤–æ–¥–∏—Ç–µ–ª—è

---

### 4. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞

**PATCH** `/delivery/driver/orders/{order_id}/status`

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "status": "driver_on_way"
}
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è:**
- `driver_on_way` - –í–æ–¥–∏—Ç–µ–ª—å –µ–¥–µ—Ç –∫ —Ç–æ—á–∫–µ –∑–∞–±–æ—Ä–∞
- `picked_up` - –ü–æ—Å—ã–ª–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞
- `in_delivery` - –í –¥–æ—Å—Ç–∞–≤–∫–µ
- `delivered` - –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `completed`)

**–û—Ç–≤–µ—Ç (200 OK):** –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∑–∞–∫–∞–∑

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ —Å—Ç–∞—Ç—É—Å–∞ `delivered` –∑–∞–∫–∞–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `completed`.

---

## üìä –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–∞

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–∫–∞–∑–∞:

```
created ‚Üí searching_driver ‚Üí driver_assigned ‚Üí driver_on_way ‚Üí 
picked_up ‚Üí in_delivery ‚Üí delivered ‚Üí completed
```

**–ò–ª–∏ –æ—Ç–º–µ–Ω–∞:**
```
... ‚Üí canceled
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤:

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –ö—Ç–æ –≤–∏–¥–∏—Ç |
|--------|----------|-----------|
| `created` | –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω, –æ–∂–∏–¥–∞–µ—Ç –ø–æ–∏—Å–∫–∞ –≤–æ–¥–∏—Ç–µ–ª—è | –ö–ª–∏–µ–Ω—Ç |
| `searching_driver` | –ò–¥—ë—Ç –ø–æ–∏—Å–∫ –≤–æ–¥–∏—Ç–µ–ª—è | –ö–ª–∏–µ–Ω—Ç |
| `driver_assigned` | –í–æ–¥–∏—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω | –ö–ª–∏–µ–Ω—Ç, –í–æ–¥–∏—Ç–µ–ª—å |
| `driver_on_way` | –í–æ–¥–∏—Ç–µ–ª—å –µ–¥–µ—Ç –∫ —Ç–æ—á–∫–µ –∑–∞–±–æ—Ä–∞ | –ö–ª–∏–µ–Ω—Ç, –í–æ–¥–∏—Ç–µ–ª—å |
| `picked_up` | –ü–æ—Å—ã–ª–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–º | –ö–ª–∏–µ–Ω—Ç, –í–æ–¥–∏—Ç–µ–ª—å |
| `in_delivery` | –ü–æ—Å—ã–ª–∫–∞ –≤ –¥–æ—Å—Ç–∞–≤–∫–µ | –ö–ª–∏–µ–Ω—Ç, –í–æ–¥–∏—Ç–µ–ª—å |
| `delivered` | –ü–æ—Å—ã–ª–∫–∞ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ | –ö–ª–∏–µ–Ω—Ç, –í–æ–¥–∏—Ç–µ–ª—å |
| `completed` | –ó–∞–∫–∞–∑ –∑–∞–≤–µ—Ä—à—ë–Ω | –ö–ª–∏–µ–Ω—Ç, –í–æ–¥–∏—Ç–µ–ª—å |
| `canceled` | –ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—ë–Ω | –ö–ª–∏–µ–Ω—Ç, –í–æ–¥–∏—Ç–µ–ª—å |

---

## üîÑ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö

### Polling (–æ–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä–∞)

–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ polling:

1. **–ê–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑** (—Å—Ç–∞—Ç—É—Å—ã –¥–æ `completed`/`canceled`):
   - –ò–Ω—Ç–µ—Ä–≤–∞–ª: **5-10 —Å–µ–∫—É–Ω–¥**
   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ `completed` –∏–ª–∏ `canceled`

2. **–°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤**:
   - –ò–Ω—Ç–µ—Ä–≤–∞–ª: **30 —Å–µ–∫—É–Ω–¥** (–µ—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã)
   - –ò–ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω

3. **–ë–∞–ª–∞–Ω—Å**:
   - –û–±–Ω–æ–≤–ª—è—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞
   - –ò–ª–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —ç–∫—Ä–∞–Ω–∞ –±–∞–ª–∞–Ω—Å–∞

### WebSocket (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω WebSocket –Ω–∞ –±—ç–∫–µ–Ω–¥–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫:

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|----------|
| 400 | Bad Request | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞, –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ |
| 401 | Unauthorized | –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| 403 | Forbidden | –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –ø—Ä–∞–≤ |
| 404 | Not Found | –ü–æ–∫–∞–∑–∞—Ç—å "–ù–µ –Ω–∞–π–¥–µ–Ω–æ" |
| 500 | Internal Server Error | –ü–æ–∫–∞–∑–∞—Ç—å "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ" |
| 503 | Service Unavailable | –ü–æ–∫–∞–∑–∞—Ç—å "–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" |

### –§–æ—Ä–º–∞—Ç –æ—à–∏–±–∫–∏:
```json
{
  "detail": "–¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏"
}
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ (–ø—Å–µ–≤–¥–æ–∫–æ–¥)

### –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏

```javascript
async function calculatePrice(pickup, dropoff) {
  try {
    const response = await fetch(`${API_URL}/delivery/calculate-price`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`
      },
      body: JSON.stringify({ pickup, dropoff })
    });
    
    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.detail);
    }
    
    return await response.json();
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—á—ë—Ç–∞:', error);
    throw error;
  }
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

```javascript
async function createOrder(orderData) {
  // 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
  const balance = await getBalance();
  const price = await calculatePrice(orderData.pickup, orderData.dropoff);
  
  if (balance.balance < price.delivery_cost) {
    throw new Error('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ');
  }
  
  // 2. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
  const response = await fetch(`${API_URL}/delivery/orders`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}`
    },
    body: JSON.stringify(orderData)
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.detail);
  }
  
  return await response.json();
}
```

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

```javascript
function trackOrder(orderId, onUpdate) {
  const interval = setInterval(async () => {
    try {
      const order = await getOrder(orderId);
      onUpdate(order);
      
      // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
      if (order.status === 'completed' || order.status === 'canceled') {
        clearInterval(interval);
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:', error);
    }
  }, 5000); // –ö–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
  
  return interval; // –î–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
}
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–¢–æ–∫–µ–Ω—ã:** –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Keychain/Keystore)
2. **HTTPS:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
4. **–û—à–∏–±–∫–∏:** –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:

**–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¢–∞—à–∫–µ–Ω—Ç–∞:**
- –¶–µ–Ω—Ç—Ä: `41.3111, 69.2797`
- –¢–µ—Å—Ç–æ–≤—ã–µ —Ç–æ—á–∫–∏ –≤ —Ä–∞–¥–∏—É—Å–µ 5 –∫–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞—Å—á—ë—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è

**–¢–µ—Å—Ç–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω):**
- –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –∫–º: 1000 —Å—É–º
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: 5000 —Å—É–º
- –ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: 2000 —Å—É–º

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É API
