# Рекомендации по UI/UX для мобильного приложения доставки

## 🎨 Общие принципы дизайна

### Цветовая схема

**Основные цвета:**
- **Primary (основной):** `#007AFF` (синий) - для кнопок действий, ссылок
- **Success (успех):** `#34C759` (зелёный) - для успешных операций, доставлено
- **Warning (предупреждение):** `#FF9500` (оранжевый) - для предупреждений, ожидание
- **Error (ошибка):** `#FF3B30` (красный) - для ошибок, отмены
- **Background (фон):** `#F2F2F7` (светло-серый) - для фона экранов
- **Text Primary:** `#000000` (чёрный) - основной текст
- **Text Secondary:** `#8E8E93` (серый) - вторичный текст

**Статусы заказа (цветовая индикация):**
- `created` / `searching_driver` - Серый (`#8E8E93`)
- `driver_assigned` - Синий (`#007AFF`)
- `driver_on_way` - Оранжевый (`#FF9500`)
- `picked_up` / `in_delivery` - Фиолетовый (`#AF52DE`)
- `delivered` / `completed` - Зелёный (`#34C759`)
- `canceled` - Красный (`#FF3B30`)

---

## 📱 Экраны приложения

### 1. Экран создания заказа

#### Структура экрана:

```
┌─────────────────────────────────┐
│  [←] Создать заказ              │
├─────────────────────────────────┤
│                                  │
│  ┌─────────────────────────┐   │
│  │  📍 Точка отправления   │   │
│  │  [Выбрать на карте]     │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  📍 Точка назначения    │   │
│  │  [Выбрать на карте]     │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  📦 Описание посылки    │   │
│  │  [Введите описание...]  │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  💰 Стоимость: 4500 сум│   │
│  │  📏 Расстояние: 2.5 км │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  💳 Баланс: 50000 сум   │   │
│  └─────────────────────────┘   │
│                                  │
│  [Создать заказ]                │
└─────────────────────────────────┘
```

#### Рекомендации:

1. **Карта:**
   - Показывать карту с возможностью выбора точек
   - Маркеры для точек отправления (синий) и назначения (зелёный)
   - Линия маршрута между точками
   - Кнопка "Моё местоположение" для быстрого выбора

2. **Выбор адреса:**
   - Поиск по адресу с автодополнением
   - Сохранённые адреса (дом, работа)
   - Выбор на карте (long press)

3. **Расчёт стоимости:**
   - Показывать в реальном времени при изменении точек
   - Анимация загрузки при расчёте
   - Разбивка стоимости: базовая + за км = итого

4. **Проверка баланса:**
   - Показывать текущий баланс
   - Предупреждение, если баланс меньше стоимости доставки
   - Кнопка "Пополнить баланс" при недостатке средств

5. **Валидация:**
   - Проверять заполнение обязательных полей
   - Проверять координаты перед отправкой
   - Показывать ошибки под полями

---

### 2. Экран отслеживания заказа

#### Структура экрана:

```
┌─────────────────────────────────┐
│  [←] Заказ #123                 │
├─────────────────────────────────┤
│                                  │
│  ┌─────────────────────────┐   │
│  │  Статус: В доставке     │   │
│  │  [Индикатор прогресса]  │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  🚗 Водитель            │   │
│  │  Иван Иванов            │   │
│  │  📞 +998 90 123 45 67   │   │
│  │  [Позвонить] [Написать]│   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  📍 Маршрут              │   │
│  │                          │   │
│  │  [Карта с маршрутом]     │   │
│  │                          │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  📦 Детали заказа        │   │
│  │  От: ул. Навои 1        │   │
│  │  До: ул. Амира Темура 15 │   │
│  │  Описание: Документы    │   │
│  │  Стоимость: 4500 сум    │   │
│  └─────────────────────────┘   │
│                                  │
│  [Отменить заказ]               │
└─────────────────────────────────┘
```

#### Рекомендации:

1. **Индикатор прогресса:**
   - Вертикальный timeline со статусами
   - Активный статус подсвечен
   - Прошедшие статусы закрашены зелёным
   - Будущие статусы серые

2. **Карта:**
   - Показывать текущее местоположение водителя (если доступно)
   - Маршрут от точки отправления до назначения
   - Обновление позиции водителя в реальном времени

3. **Информация о водителе:**
   - Фото водителя (если есть)
   - Имя и рейтинг
   - Номер телефона с кнопкой звонка
   - Модель и номер машины

4. **Обновление данных:**
   - Автообновление каждые 5-10 секунд
   - Pull-to-refresh для ручного обновления
   - Уведомления при смене статуса

5. **Отмена заказа:**
   - Кнопка "Отменить" только до статуса `picked_up`
   - Диалог подтверждения с полем причины
   - После отмены показывать информацию о возврате средств

---

### 3. Экран списка заказов

#### Структура экрана:

```
┌─────────────────────────────────┐
│  Мои заказы                     │
├─────────────────────────────────┤
│  [Активные] [Завершённые]      │
├─────────────────────────────────┤
│                                  │
│  ┌─────────────────────────┐   │
│  │  Заказ #123             │   │
│  │  📍 ул. Навои → ул. Амира│   │
│  │  💰 4500 сум             │   │
│  │  🟢 В доставке           │   │
│  │  📅 02.02.2026 12:00     │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  Заказ #122             │   │
│  │  📍 ул. Чилонзар → центр │   │
│  │  💰 6000 сум             │   │
│  │  ✅ Завершён             │   │
│  │  📅 01.02.2026 15:30     │   │
│  └─────────────────────────┘   │
│                                  │
│  [Загрузить ещё...]             │
└─────────────────────────────────┘
```

#### Рекомендации:

1. **Группировка:**
   - Вкладки: "Активные" и "Завершённые"
   - Активные заказы сверху
   - Сортировка по дате (новые первыми)

2. **Карточка заказа:**
   - Компактная информация: адреса, стоимость, статус
   - Цветовая индикация статуса
   - Иконка статуса (🚗, ✅, ❌)
   - Тап для перехода к деталям

3. **Пагинация:**
   - Подгрузка при скролле вниз
   - Индикатор загрузки внизу списка
   - Кнопка "Загрузить ещё" если есть

4. **Пустое состояние:**
   - Иконка и текст "У вас пока нет заказов"
   - Кнопка "Создать заказ"

---

### 4. Экран баланса

#### Структура экрана:

```
┌─────────────────────────────────┐
│  Баланс                         │
├─────────────────────────────────┤
│                                  │
│  ┌─────────────────────────┐   │
│  │  Текущий баланс         │   │
│  │  50 000 сум             │   │
│  │  [Пополнить]            │   │
│  └─────────────────────────┘   │
│                                  │
│  История операций               │
├─────────────────────────────────┤
│                                  │
│  ┌─────────────────────────┐   │
│  │  ✅ Возврат             │   │
│  │  +4500 сум              │   │
│  │  Заказ #123             │   │
│  │  02.02.2026 12:05       │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  ❌ Списание             │   │
│  │  -4500 сум              │   │
│  │  Заказ #123             │   │
│  │  02.02.2026 12:00       │   │
│  └─────────────────────────┘   │
│                                  │
└─────────────────────────────────┘
```

#### Рекомендации:

1. **Отображение баланса:**
   - Крупный шрифт для суммы
   - Форматирование: `50 000 сум` (с пробелами)
   - Предупреждение при низком балансе (< 10000)

2. **История операций:**
   - Группировка по датам
   - Цветовая индикация: зелёный (+), красный (-)
   - Ссылка на заказ при наличии `order_id`
   - Пагинация при большом количестве записей

3. **Пополнение баланса:**
   - Кнопка "Пополнить" ведёт на экран пополнения
   - Интеграция с платёжными системами
   - Минимальная сумма пополнения

---

### 5. Экран для водителя - список заказов

#### Структура экрана:

```
┌─────────────────────────────────┐
│  Заказы                         │
├─────────────────────────────────┤
│  [Новые] [В работе] [Завершённые]│
├─────────────────────────────────┤
│                                  │
│  ┌─────────────────────────┐   │
│  │  Заказ #123              │   │
│  │  📍 ул. Навои → ул. Амира│   │
│  │  💰 4500 сум             │   │
│  │  📏 2.5 км               │   │
│  │  [Принять] [Отклонить]   │   │
│  └─────────────────────────┘   │
│                                  │
│  ┌─────────────────────────┐   │
│  │  Заказ #124             │   │
│  │  📍 Центр → Чилонзар    │   │
│  │  💰 6000 сум             │   │
│  │  📏 5.0 км               │   │
│  │  [Принять] [Отклонить]   │   │
│  └─────────────────────────┘   │
│                                  │
└─────────────────────────────────┘
```

#### Рекомендации:

1. **Новые заказы:**
   - Показывать расстояние до точки забора
   - Кнопки "Принять" и "Отклонить"
   - Таймер приёма заказа (если реализован)

2. **Активные заказы:**
   - Текущий заказ выделен
   - Кнопки для смены статуса
   - Навигация к точке назначения

3. **Статусы:**
   - `driver_on_way` - Кнопка "Я на месте"
   - `picked_up` - Кнопка "В доставке"
   - `in_delivery` - Кнопка "Доставлено"

---

## 🎯 UX паттерны

### 1. Обратная связь

**Загрузка:**
- Skeleton screens при загрузке данных
- Индикаторы загрузки для действий
- Прогресс-бары для длительных операций

**Успех:**
- Toast-уведомления при успешных действиях
- Анимация успеха (checkmark)
- Автоматическое обновление данных

**Ошибки:**
- Понятные сообщения об ошибках
- Кнопка "Повторить" при ошибках сети
- Валидация форм в реальном времени

---

### 2. Навигация

**Структура:**
- Bottom navigation для основных разделов
- Back button для возврата
- Breadcrumbs для сложных экранов

**Переходы:**
- Плавные анимации между экранами
- Swipe gestures для возврата
- Deep linking для уведомлений

---

### 3. Уведомления

**Типы уведомлений:**
- Push-уведомления при смене статуса заказа
- In-app уведомления для важных событий
- Badge на иконке приложения для новых заказов

**Содержание:**
- "Водитель назначен: Иван Иванов"
- "Водитель едет к точке забора"
- "Посылка доставлена"

---

### 4. Доступность

**Рекомендации:**
- Поддержка крупного шрифта
- Контрастные цвета для текста
- VoiceOver/TalkBack поддержка
- Кнопки минимум 44x44 pt

---

## 📐 Технические рекомендации

### Производительность

1. **Кэширование:**
   - Кэшировать список заказов на 30 секунд
   - Кэшировать баланс до следующего заказа
   - Кэшировать расчёт стоимости на 5 секунд

2. **Оптимизация:**
   - Lazy loading для списков
   - Оптимизация изображений
   - Дебаунс для поиска адресов

3. **Офлайн режим:**
   - Показывать кэшированные данные
   - Очередь запросов для отправки при восстановлении сети

---

### Анимации

1. **Переходы:**
   - Плавные переходы между экранами (300ms)
   - Fade-in для списков
   - Slide для модальных окон

2. **Интерактивность:**
   - Haptic feedback при действиях
   - Анимация кнопок при нажатии
   - Pull-to-refresh анимация

---

## 🎨 Примеры компонентов

### Кнопка статуса заказа

```swift
// iOS SwiftUI пример
struct OrderStatusBadge: View {
    let status: DeliveryOrderStatus
    
    var body: some View {
        HStack {
            Image(systemName: statusIcon)
                .foregroundColor(statusColor)
            Text(statusText)
                .font(.caption)
                .foregroundColor(statusColor)
        }
        .padding(.horizontal, 12)
        .padding(.vertical, 6)
        .background(statusColor.opacity(0.1))
        .cornerRadius(12)
    }
}
```

### Карточка заказа

```swift
struct OrderCard: View {
    let order: DeliveryOrderResponse
    
    var body: some View {
        VStack(alignment: .leading, spacing: 12) {
            // Заголовок
            HStack {
                Text("Заказ #\(order.id)")
                    .font(.headline)
                Spacer()
                OrderStatusBadge(status: order.status)
            }
            
            // Адреса
            VStack(alignment: .leading, spacing: 4) {
                HStack {
                    Image(systemName: "mappin.circle.fill")
                        .foregroundColor(.blue)
                    Text(order.pickup_address ?? "Точка отправления")
                        .font(.subheadline)
                }
                
                HStack {
                    Image(systemName: "mappin.circle.fill")
                        .foregroundColor(.green)
                    Text(order.dropoff_address ?? "Точка назначения")
                        .font(.subheadline)
                }
            }
            
            // Стоимость и дата
            HStack {
                Text("\(Int(order.delivery_cost)) сум")
                    .font(.subheadline)
                    .fontWeight(.semibold)
                Spacer()
                Text(formatDate(order.created_at))
                    .font(.caption)
                    .foregroundColor(.secondary)
            }
        }
        .padding()
        .background(Color(.systemBackground))
        .cornerRadius(12)
        .shadow(color: .black.opacity(0.1), radius: 4, x: 0, y: 2)
    }
}
```

---

## 📱 Адаптивность

### Размеры экранов

- **iPhone SE / маленькие:** Компактные карточки, меньше отступов
- **iPhone стандартные:** Стандартный дизайн
- **iPhone Plus / Max:** Больше контента на экране, больше отступов

### Ориентация

- **Портретная:** Основная ориентация
- **Альбомная:** Опционально, для карты

---

## ✅ Чеклист перед релизом

- [ ] Все экраны протестированы на разных размерах устройств
- [ ] Обработаны все ошибки API
- [ ] Реализованы все статусы заказа
- [ ] Настроены уведомления
- [ ] Оптимизирована производительность
- [ ] Добавлена поддержка офлайн режима
- [ ] Протестирована навигация
- [ ] Проверена доступность
- [ ] Добавлены анимации
- [ ] Протестирована работа с картами

---

## 📚 Дополнительные ресурсы

- [Material Design Guidelines](https://material.io/design)
- [Human Interface Guidelines (iOS)](https://developer.apple.com/design/human-interface-guidelines/)
- [Flutter Design Guidelines](https://flutter.dev/docs/development/ui/widgets)
